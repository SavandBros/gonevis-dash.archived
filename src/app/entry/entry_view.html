<!-- Add button -->
<button type="button" class="btn btn-primary btn-corner" ui-sref="dash.entry-edit({isPage: isPageView})">
  <i class="fa fa-plus"></i>
</button>
<!-- Main -->
<div class="container container-light pad-top">
  <!-- Top bar -->
  <top-bar search-form="searchForm" view="view" view-name="entryView"></top-bar>
  <!-- Search noresult -->
  <no-result search-form="searchForm" view="view"></no-result>
  <!-- Nothing -->
  <!-- TODO: Translate -->
  <nothing text="{{ nothingText }}" view="view"
    ng-if="!entries.length && !searchForm.noResult && initialled"></nothing>
  <!-- List -->
  <div ng-if="entries.length">
    <!-- Entry grid -->
    <div class="animated fadeIn" ng-if="view == 'grid'">
      <div class="col-xs-12 col-md-4" ng-repeat="entry in entries" ng-show="!entry.isDeleted">
        <div class="post">
          <div class="post-img" style="background-image: url({{ entry.get.media.cover_image.thumbnail_256x256 ?
            entry.get.media.cover_image.thumbnail_256x256 : codekit.getDefaultImage('medium') }});">
            <div class="post-featured" ng-if="entry.get.featured">
              <i class="fa fa-star-o fa-fw text-warning c-white "></i>
            </div>
            <!-- Options -->
            <div class="dropdown options" title="options">
              <button class="btn btn-default dropdown-toggle o-fade-hard o-fade-hover-full bg-no c-white b-no"
                data-toggle="dropdown" style="padding: 5px;">
                <i class="fa fa-fw fa-ellipsis-v"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li>
                  <a ng-href="{{ entry.getUrl() }}" target="_blank">
                    <i class="fa fa-fw fa-external-link"></i> {{ 'VIEW_ON_BLOG' | translate }}
                  </a>
                </li>
                <li>
                  <a ng-click="entry.addToNavigation()">
                    <i class="fa fa-fw fa-bars"></i> {{ 'ADD_TO_NAVIGATION' | translate }}
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a ng-click="onDeletedEntry(entry)">
                    <i class="fa fa-fw fa-trash text-danger"></i> {{ 'DELETE' | translate }}
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="post-body" style="padding: 10px 15px">
            <!-- Status -->
            <p class="post-info o-fade s-mar-no">
              <span ng-if="entry.get.status === 1">{{ 'PUBLISHED' | translate }} &middot; {{ entry.get.published | date }}</span>
              <span ng-if="entry.get.status !== 1">{{ 'DRAFT' | translate }} &middot; {{ entry.get.created | date }}</span>
            </p>
            <!-- Title -->
            <a ui-sref="dash.entry-edit({ entryId: entry.get.id, isPage: isPageView })" ng-click="entry.cache()">
              <p class="s-mar-no t-line">{{ entry.get.title }}</p>
            </a>
            <!-- Updated by -->
            <small ng-show="entry.get.updated_by">
              <span class="o-fade" translate>UPDATED_BY</span>
              <a ng-href="{{ entry.get.updated_by.get_absolute_uri }}"
                target="_blank">@{{ entry.get.updated_by.username }}</a>
            </small>
          </div>
          <!-- Entry Stats -->
          <div class="post-footer">
            <div class="row o-tooltip">
              <!-- Comments -->
              <div class="col-md-4 col-xs-4 text-center">
                <div class="s-pad-soft" title="Comments {{ entry.get.comment_enabled ? 'enabled' : 'disabled'}}">
                  <i class="fa fa-comments-o fa-fw"></i>
                  <small>{{ entry.get.comment_count }}</small>
                </div>
              </div>
              <!-- Views -->
              <div class="col-md-4 col-xs-4 text-center">
                <div class="s-pad-soft">
                  <i class="fa fa-eye fa-fw"></i> <small>{{ entry.get.view_count }}</small>
                </div>
              </div>
              <!-- Likes -->
              <div class="col-md-4 col-xs-4 text-center">
                <div class="s-pad-soft">
                  <i class="fa fa-heart-o fa-fw"></i> <small>{{ entry.get.vote_count }}</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Entry list -->
    <div class="panel panel-default s-box s-mar-x-soft animated fadeIn" ng-if="view == 'list'">
      <div class="panel-heading">
        <!-- Action dropdown -->
        <div class="dropdown options pull-right" title="options">
          <button class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" ng-disabled="!selectCount">
            {{ 'ACTION' | translate }} <i class="fa fa-caret-down"></i>
          </button>
          <ul class="dropdown-menu">
            <li ng-repeat="a in actions">
              <a ng-click="setProperty(a.property, a.value)">
                <i class="fa fa-{{ a.icon }}"></i>{{ a.label }}
              </a>
            </li>
            <hr>
            <li>
              <a ng-click="removeSelected()">
                <i class="fa fa-trash text-danger"></i> {{ 'REMOVE_SELECTED' | translate}}
              </a>
            </li>
          </ul>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="panel-body s-pad-y-no">
        <ul class="list-unstyled s-mar-no">
          <li class="row list-panel b-left s-fade" ng-class="{'b-color-success': entry.get.status == 1}"
            ng-repeat="entry in entries" ng-show="!entry.isDeleted">
            <!--Title and slug-->
            <div class="col-xs-7 col-sm-8 col-md-9 col-lg-9 t-line">
              <input type="checkbox" ng-model="entry.isSelected" ng-change="countSelected(entry)">
              <a ui-sref="dash.entry-edit({entryId: entry.get.id, isPage: isPageView})" ng-click="entry.cache()">{{ entry.get.title }}</a>
              <small class="dis-b o-fade">/{{ entry.get.slug }}</small>
            </div>
            <!-- Date -->
            <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 text-right o-fade s-pad-no">
              <span class="hidden-xs">{{ entry.get.status == 1 ? entry.get.published : entry.get.created | date }}</span>
              <span class="visible-xs small">{{ entry.get.status == 1 ? entry.get.published : entry.get.created | date }}</span>
              <small class="dis-b o-fade" ng-if="entry.get.status === 1" translate>PUBLICATION</small>
              <small class="dis-b o-fade" ng-if="entry.get.status === 0" translate>CREATION</small>
            </div>
            <!-- Tools -->
            <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-right s-pad-no">
              <button class="btn btn-default btn-circle dropdown-toggle btn-sm o-fade" data-toggle="dropdown"
                      style="margin-top: 5px;">
                <i class="fa fa-fw fa-ellipsis-v"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li class="dropdown-header" ng-if="entry.get.comment_enabled">
                  <i init class="fa fa-fw fa-comments text-muted"></i> {{ 'COMMENTING_ENABLED' | translate }}
                </li>
                <li class="dropdown-header" ng-if="entry.get.featured ">
                  <i init class="fa fa-fw fa-star text-primary"></i> {{ 'FEATURED' | translate }}
                </li>
                <li class="dropdown-header" ng-if="entry.get.password ">
                  <i init class="fa fa-fw fa-lock text-danger"></i> {{ 'PASSWORD_PROTECTED' | translate }}
                </li>
                <li class="divider" ng-show="entry.get.password || entry.get.featured || entry.get.comment_enabled"></li>
                <li>
                  <a ng-href="{{ entry.getUrl() }}" target="_blank">
                    <i class="fa fa-fw fa-external-link"></i> {{ 'VIEW_ON_BLOG' | translate }}
                  </a>
                </li>
                <li>
                  <a ng-click="entry.addToNavigation()">
                    <i class="fa fa-fw fa-bars"></i> {{ 'ADD_TO_NAVIGATION' | translate }}
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a ng-click="undoService.remove(entry)">
                    <i class="fa fa-fw fa-trash text-danger"></i> {{ 'DELETE' | translate }}
                  </a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <!-- More -->
    <pagination page-form="pageForm" ng-if="initialled"></pagination>
  </div>
</div>
